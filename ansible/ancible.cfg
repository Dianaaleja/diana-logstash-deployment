# ansible.cfg

[defaults]
inventory = inventory.ini # Asegúrate de que apunte a tu archivo de inventario

[ssh_connection]
# Usar el Bastion Host como proxy para acceder a instancias privadas
# Reemplaza 'i-xxxxxxxxxxxxxxxxx' con el ID de instancia real de tu Bastion Host
# que obtendrás de las salidas de Terraform.
# Opcionalmente, puedes usar la IP pública del Bastion si es estática y preferible.
# Si usas el ID de instancia, Ansible lo resolverá si tienes un inventario dinámico o si lo configuras para ello.
# Para un inventario estático y simple, es más fácil usar la IP pública del Bastion.
# Asegúrate de que tu clave SSH esté configurada para el agente SSH o especificada con -i
ssh_args = -o ProxyCommand="ssh -W %h:%p -q ec2-user@<BASTION_PUBLIC_IP_OR_DNS_NAME> -i /ruta/a/tu/clave.pem"
# Si tu clave SSH ya está en tu agente SSH (ssh-add), puedes simplificar:
# ssh_args = -o ProxyCommand="ssh -W %h:%p -q ec2-user@<BASTION_PUBLIC_IP_OR_DNS_NAME>"

# Ejemplo usando el ID de instancia (requiere que Ansible pueda resolverlo, a menudo con inventario dinámico)
# ssh_args = -o ProxyCommand="ssh -W %h:%p -q ec2-user@i-xxxxxxxxxxxxxxxxx"
